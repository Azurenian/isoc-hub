<!--
  web-hub-ojt.html
  Purpose: Hub-OJT Project section content
-->

<div id="hub-ojt-section" class="section" style="display: none;">
  <div class="container-fluid py-4">
    <!-- Hub-OJT Header -->
    <div class="container py-3">
      <!-- Title Row -->
      <div class="row mb-3">
        <div class="col-12">
          <h3 class="fw-bold hub-ojt-title m-0">
            Hub-OJT Project Management
          </h3>
        </div>
      </div>
      <!-- Controls Row: Search Bar (left), Buttons (right) -->
      <div class="row mb-4">
        <div class="col-md-6 col-12 mb-2 mb-md-0">
          <div class="input-group shadow-sm position-relative" style="max-width: 320px;">
            <span
              class="input-group-text bg-white border-end-0"
              style="border-radius: 8px 0 0 8px;"
            >
              <i class="bi bi-search text-secondary"></i>
            </span>
            <input
              type="text"
              id="hubOjtSearchInput"
              class="form-control border-start-0"
              placeholder="Search OJT projects"
              aria-label="Search"
              style="border-radius: 0 8px 8px 0; background: #f8f9fa;"
            />
            <!-- Search Recommendations Dropdown -->
            <ul id="hubOjtSearchSuggestions" class="list-group position-absolute w-100" style="
              top: 100%;
              z-index: 1050;
              display: none;
              max-height: 200px;
              overflow-y: auto;
              border-radius: 0 0 8px 8px;
              border-top: none;
              box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            "></ul>
          </div>
        </div>
        <div class="col-md-6 col-12 d-flex justify-content-md-end justify-content-start gap-2">
          <button type="button" class="btn btn-success" title="Add OJT Project">
            <i class="bi bi-plus-circle"></i> Add
          </button>
          <button type="button" class="btn btn-warning" title="Edit">
            <i class="bi bi-pencil-square"></i> Edit
          </button>
          <button type="button" class="btn btn-danger" title="Delete">
            <i class="bi bi-trash"></i> Delete
          </button>
          <button type="button" class="btn btn-info" title="Refresh">
            <i class="bi bi-arrow-clockwise"></i> Refresh
          </button>
        </div>
      </div>
      <!-- Loading Spinner -->
      <div
        id="ojt-loading-spinner"
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100px;
        "
      >
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- OJT Card Body -->
      <div class="row ojt-card-container g-4">
        <!-- OJT project cards will be rendered here -->
      </div>
    </div>
  </div>
</div>

<!-- Modal for Add/Edit OJT Project -->
<div
  class="modal fade"
  id="ojtModal"
  tabindex="-1"
  aria-labelledby="ojtModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <form id="ojtForm" class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="ojtModalLabel">Add OJT Project</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="ojtEditIndex" />
        <div class="mb-3">
          <label for="ojtName" class="form-label">Project Name</label>
          <input type="text" class="form-control" id="ojtName" required />
        </div>
        <div class="mb-3">
          <label for="ojtLink" class="form-label">Link</label>
          <input type="url" class="form-control" id="ojtLink" required />
        </div>
        <div class="mb-3">
          <label for="ojtDescription" class="form-label">Description</label>
          <textarea
            class="form-control"
            id="ojtDescription"
            rows="3"
            required
          ></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Delete Confirmation Modal for OJT -->
<div
  class="modal fade"
  id="ojtDeleteConfirmModal"
  tabindex="-1"
  aria-labelledby="ojtDeleteConfirmLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="ojtDeleteConfirmLabel">Confirm Deletion</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this OJT project? This action cannot be undone.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          No
        </button>
        <button type="button" class="btn btn-danger" id="ojtConfirmDeleteBtn">
          Yes, Delete
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Comment Modal for OJT -->
<div
  class="modal fade"
  id="ojtCommentModal"
  tabindex="-1"
  aria-labelledby="ojtCommentModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <form id="ojtCommentForm" class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="ojtCommentModalLabel">Add Comment</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="ojtCommentCardId" />
        <div class="mb-3">
          <label for="ojtCommentName" class="form-label">Your Name</label>
          <input type="text" class="form-control" id="ojtCommentName" required />
        </div>
        <div class="mb-3">
          <label for="ojtCommentText" class="form-label">Comment</label>
          <textarea
            class="form-control"
            id="ojtCommentText"
            rows="3"
            required
          ></textarea>
        </div>
        <div class="d-grid mt-2">
          <button
            type="button"
            id="ojtSeeRecentCommentBtn"
            class="btn btn-primary fw-bold"
            style="font-size: 1.08rem"
          >
            <i class="bi bi-chat-dots"></i>
            <span style="margin-left: 0.4em">View Comments</span>
          </button>
        </div>
        <div id="ojtRecentCommentResult" class="mt-2"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="submit" class="btn btn-primary">Submit Comment</button>
      </div>
    </form>
  </div>
</div>

<!-- Comments Modal for OJT -->
<div
  class="modal fade"
  id="ojtViewCommentsModal"
  tabindex="-1"
  aria-labelledby="ojtViewCommentsModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content comments-modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="ojtViewCommentsModalLabel">Comments</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body" id="ojtViewCommentsBody">
        <!-- Comments will be loaded here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Notification Bar for OJT -->
<div
  id="ojt-notification-bar"
  style="
    display: none;
    position: fixed;
    top: 24px;
    left: 50%;
    transform: translateX(-50%);
    min-width: 280px;
    max-width: 90vw;
    z-index: 9999;
    background: #198754;
    color: #fff;
    padding: 14px 32px;
    border-radius: 8px;
    font-size: 1.1rem;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);
    opacity: 0;
    transition: opacity 0.4s, top 0.4s;
  "
></div>